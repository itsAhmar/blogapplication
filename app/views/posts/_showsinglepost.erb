<div class="container my-3 ">
  <div class="card single-post-css bg-light" id="single-post">
    <%= turbo_frame_tag "post_#{@post.id}" do %>

      <div data-controller="read-more" data-read-more-my-value="<%= @post.description %>" class="card-body p-4">
        
        <h5 class="card-title text-center fs-4 fw-bold mb-4"><%= @post.title %></h5>

        <p data-read-more-target="description" class="card-text text-justify mb-0"><%= des = @post.description.truncate(120 , separator: ' ') %></p>
        <% if @post.description.length > 120 %>
          <span data-action="click->read-more#toggle" data-read-more-target="toggleButton" class="mr-2 read-more-less-button" >Read More</span>
        <% end %>

        <p class="card-text text-black mt-4"><strong>By:</strong> <%= @post.user.email.slice(0..@post.user.email.index("@") - 1) %></p>
        <!-- if logged in user created the post then letting him edit -->
        <% if current_user.id == @post.user.id %>
          <!-- Edit and Delete Post buttons -->
          <div class="d-flex justify-content-center align-items-center mt-5">
            <%= link_to "Edit", edit_post_path(@post), class: "btn bg-info rounded-pill me-2" %>
            <%= link_to "Delete", @post, data: { turbo_method: :delete, turbo_confirm: "Are you sure?", turbo_frame: '_top' }, class: "btn bg-info rounded-pill" %>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
